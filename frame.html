<!DOCTYPE html>
<html>
<head>
<title>internet maze</title>
<style type="text/css">
body{
    background: linear-gradient(#eeffff, #ffeeee);
    
}
iframe{
    background: #ffffff;
}
</style>
<script>
    var timeout_id = null;

    //set the global scope vars
    var page_index = 0;
    // all the html files in this directory/repo
    var pages = [
        "home.html",
        "hello_map.html",
        "fighter.html",
        "doggie.html",
        "kitty_map.html",
        "catmapper.html",
        "cow.html",
        "cow_error.html",
        "haixi.html",
        "potatocat.html",
        "rthms.html",
        "kittyrun.html",
        "snail.html",
    ];

	function init() {
		setRandomPage();
        log("trying to make TRICK.js say 'you've been tricked!' here when teleported");
	}

	function setRandomPage() {
        //page index is a global var, pages too
        // get page at a random index in the array of pages in the directory
        page_index = Math.floor(Math.random() * pages.length);
        log("you find yourself in a strange room");
        setPage(page_index);
	}

    function setPage(page_index){
        //set the iframe
		var html1 = "<iframe id='frame' src= ";
		var html2 = pages[page_index];
		var html3 = " style=\"height: 640px; width: 800px;\"></iframe>";
		var html = html1.concat(html2.concat(html3)); // put the strings together
		//console.log(html);
		document.getElementById("frame-holder").innerHTML = html

        //set the title!!
        document.getElementById("frame-title").innerHTML = html2;
    }
    
    function setPageByUrl(url){
        var index = pages.indexOf(url);
        setPage(index);
    }

    function setNextPage(){
        refreshArrowButts();

        //page_index is a global var
        page_index++;
        //dead end!
        if (page_index >= pages.length-1){
            page_index = pages.length-1;
            document.getElementById("right_butt").src="frame/rightarrow_grey.png";
            document.getElementById("right_butt").onclick = function(){};
            document.getElementById("right_butt").style.cursor = "default";
        }

        log("you move east");
        setPage(page_index);
    }

    function setPreviousPage(){
        refreshArrowButts();

        //page_index is a global var
        page_index--;
        //dead end!
        if (page_index <= 0){
            page_index = 0;
            document.getElementById("left_butt").src="frame/leftarrow_grey.png";
            document.getElementById("left_butt").onclick = function(){};
            document.getElementById("left_butt").style.cursor = "default";
        }

        log("you move west");
        setPage(page_index);
    }

    function refreshArrowButts(){
        document.getElementById("left_butt").src="frame/leftarrow.png";
        document.getElementById("left_butt").onclick = setPreviousPage;

        document.getElementById("right_butt").src="frame/rightarrow.png";
        document.getElementById("right_butt").onclick = setNextPage;
    }

    function log(msg){
        var msg = '&gt; ' + msg + '<br><br>';
        var log_dom = document.getElementById('log');
        log_dom.innerHTML = msg + log_dom.innerHTML;
    }
</script>

</head>
<body onLoad=init()>
	<!-- <object data="index.html" style="height: 100%"></object> !-->

	<center>
        <h1 id="frame-title">current room</h1>
		<div id="frame-holder">
			<iframe src="index.html" style="height: 640px; width: 800px;"></iframe>
		</div>
    
        <input type="image" style="position:absolute; left:-164px; right:0; margin:0 auto; bottom:16px;" src="frame/leftarrow.png"
            onClick=setPreviousPage() class="enter_button" id="left_butt" />
        <input type="image" style="position:absolute; left:0;right:-164px; margin: 0 auto; bottom: 16px;"  src="frame/rightarrow.png"
            onClick=setNextPage() class="enter_button" id="right_butt" />
    
        <div id="log" style="padding-top: 8px;width: 600px; height: 100px; max-height:100px; border: 2px inset; text-align: left; padding-left: 16px; font-family: monospace; display: none;"></div>
	</center>
	

<!--MAP-->
<link rel="stylesheet" type="text/css" href="map/map.css" />
<script src="map/MAP.js"></script>
<!--MAP-->

</body>
</html>
